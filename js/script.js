            //var database = $.parseJSON('{"lista":[{"id":"c0","nome":"ST","img":"cat_0_salvaterra-bg.jpg","prodotti":[{"id":"p0","titolo":"Amarone D.O.C.G.","sottotitolo":"","codice":"","prezzo":"","img":"prd/amarone_doc.jpg","testo":"È un grande vino, frutto della pigiatura di uve poste a riposo nei frutta di grande struttura e corposità, nasce da una macerazione a freddo pe esplodere in una fermentazione copiosa mantenendo una temperatura tre anni in botte.","varianti":[{"label":"SCHEDA","vitigno":"Corvina, Corvinone, Rondinella","colore":"Rosso rubino intenso con riflessi granati","bouquet":"Profumo forte e rotondo con note di frutta appassita e spezie","gusto":"Rotondo che richiama la ciliegia e la prugna apassita","accostamenti":"Cacciagione, piatti saporiti e formaggi stagionati","temperaturadiservizio":"20 - 22 °C si consiglia di scaraffare<br>il decanter almeno un\'ora prima","nrbottigliepercartone":6,"nrcartonipallet":76,"nrcartoniperstrato":19,"nrstratipallet":"4/5","dimensionecartone":"26,5x18x31","pesocartoneinKg":"8,9","pesopalletinKg":710,"bottiglia":"Borgognotte Lucia","contenuto":"750 ml","gradazione":"14,5 - 15% vol","acidita":"","areadiproduzione":"Illasi, Quinto, Mezzane di Sotto, Montorio"}],"documenti":[{"nome":"Amarone D.O.C.G.","path":"pdf/AmaroneDOC.pdf"}],"video":[],"foto":["prd/amarone_doc.jpg"]},{"id":"p1","titolo":"Prosecco D.O.C.","sottotitolo":"","codice":"","prezzo":"","img":"prd/prosecco_doc.jpg","testo":"Il Prosecco ST Extra Dry ha un residuo zuccherino che varia dai 13 ai 17 grammi litro e con la sua morbidezza fa risaltare maggiormente il fruttato del vino. La raccolta dell’uva Glera, anticipata per produrre la base delvino spumante, e la fermentazione a temperatura controllata di 20 °C donano al vino un equilibrio delizioso.","varianti":[{"label":"SCHEDA","vitigno":"Glera","colore":"Giallo paglierino luminoso, perlage molto fine","bouquet":"Fruttato","gusto":"Deliziosamente equilibrato","accostamenti":"Spumante da aperitivo o ottimo accompagnamento per crostacei e, a fine pasto, per una macedonia di frutta","temperaturadiservizio":"6 - 8 °C","nrbottigliepercartone":6,"nrcartonipallet":80,"nrcartoniperstrato":16,"nrstratipallet":5,"dimensionecartone":"28,5x18,5x31,5","pesocartoneinKg":"8,9","pesopalletinKg":745,"bottiglia":"Collio","contenuto":"750 ml","gradazione":"11% vol","acidita":"","areadiproduzione":"Pedecollina Colli Euganei"}],"documenti":[{"nome":"Prosecco D.O.C.","path":"pdf/ProseccoDOC.pdf"}],"video":[],"foto":["prd/prosecco_doc.jpg"]},{"id":"p2","titolo":"Pinot Grigio delle Venezie IGT","sottotitolo":"","codice":"","prezzo":"","img":"prd/pinot_grigio_delle_venezie_igt.jpg","testo":"Vitigno che produce uva bianca dalla buccia colorata per la presenza di antociani, tipica dei vini rossi. Dopo la raccolta, l’uva viene pigiata e successivamente ha una pressatura soffice con un’immediata separazione delle bucce dal mosto. La fermentazione avviene in stretta protezione dalle ossidazioni, in botti di acciaio inox a temperatura controllata.","varianti":[{"label":"SCHEDA","vitigno":"Pinot Grigio","colore":"Giallo paglierino tendente al ramato","bouquet":"Profumo fine e leggermente aromatico","gusto":"Al palato dimostra buona struttura","accostamenti":"Vino da aperitivo o antipasti e piatti leggeri a base di pesce","temperaturadiservizio":"10 - 12 °C","nrbottigliepercartone":6,"nrcartonipallet":100,"nrcartoniperstrato":25,"nrstratipallet":"4/5","dimensionecartone":"23,5x16x31","pesocartoneinKg":"7,5","pesopalletinKg":770,"bottiglia":"Bordolese Standard Mezzo Bianco","contenuto":"750 ml","gradazione":"12,5% vol","acidita":"","areadiproduzione":"Oliosi, Provincia di Verona"}],"documenti":[{"nome":"Pinot Grigio delle Venezie IGT","path":"pdf/PinotGrigiodelleVenezieIGT.pdf"}],"video":[],"foto":["prd/pinot_grigio_delle_venezie_igt.jpg"]},{"id":"p3","titolo":"Valpolicella Superiore Ripasso DOC","sottotitolo":"","codice":"","prezzo":"","img":"prd/valpolicella_superiore_ripasso_doc.jpg","testo":"Vino rotondo e pieno la cui struttura e alcool sono maggiori rispetto al Valpolicella Superiore.Per questo vino, infatti, è stata adottata la tecnica del ripasso, che consiste nel far macerare un buon Valpolicella sulle vinacce ottenute dalla pigiatura di uve appassite, destinate a dare Amarone o Recioto, e quindi ancora ricche di succo.","varianti":[{"label":"SCHEDA","vitigno":"Corvina, Corvinone, Rondinella","colore":"Rosso rubino intenso","bouquet":"Sentori ci ciliegia e frutti di bosco","gusto":"Rotondo e pieno","accostamenti":"Carni alla griglia, arrosti e formaggi","temperaturadiservizio":"18 - 20 °C","nrbottigliepercartone":6,"nrcartonipallet":76,"nrcartoniperstrato":19,"nrstratipallet":"4/5","dimensionecartone":"25x16,5x33","pesocartoneinKg":"8,9","pesopalletinKg":710,"bottiglia":"Bordolese Riva","contenuto":"750 ml","gradazione":"13,5 - 14% vol","acidita":"","areadiproduzione":"Illasi, Quinto, Mezzane di Sotto, Montorio"}],"documenti":[{"nome":"Valpolicella Superiore Ripasso DOC","path":"pdf/ValpolicellaSuperioreRipassoDOC.pdf"}],"video":[],"foto":["prd/valpolicella_superiore_ripasso_doc.jpg"]},{"id":"p4","titolo":"Valpolicella DOC","sottotitolo":"","codice":"","prezzo":"","img":"prd/valpolicella_doc.jpg","testo":"Vino proveniente dalla zona storica della Valpolicella. Ricorda la ciliegia e la marasca. Ha un sapore asciutto, vellutato, di buona struttura, molto sapido.","varianti":[{"label":"SCHEDA","vitigno":"Corvina, Corvinone, Rondinella","colore":"Rosso rubino","bouquet":"Floreale e fruttato, ricorda la marasca fresca, le spezie, l’amarena","gusto":"Fresco e pieno","accostamenti":"Vino a tutto pasto","temperaturadiservizio":"16 °C","nrbottigliepercartone":6,"nrcartonipallet":76,"nrcartoniperstrato":19,"nrstratipallet":"4/5","dimensionecartone":"25x16,5x33","pesocartoneinKg":"8,9","pesopalletinKg":710,"bottiglia":"Bordolese Riva","contenuto":"750 ml","gradazione":"12,5 - 13% vol","acidita":"","areadiproduzione":"Illasi, Quinto, Mezzane di Sotto, Montorio"}],"documenti":[{"nome":"Valpolicella DOC","path":"pdf/ValpolicellaDOC.pdf"}],"video":[],"foto":["prd/valpolicella_doc.jpg"]},{"id":"p5","titolo":"Vino Bianco","sottotitolo":"","codice":"","prezzo":"","img":"prd/vino_bianco.jpg","testo":"","varianti":[{"label":"SCHEDA","vitigno":"Trebbiano Garganega","colore":"Giallo paglierino","bouquet":"Fresco","gusto":"Morbido fruttato","accostamenti":"","temperaturadiservizio":"6 - 8 °C","nrbottigliepercartone":6,"nrcartonipallet":100,"nrcartoniperstrato":25,"nrstratipallet":"4/5","dimensionecartone":"23,5x16x31","pesocartoneinKg":"7,5","pesopalletinKg":770,"bottiglia":"Bordolese Standard Mezzo Bianco","contenuto":"750 ml","gradazione":"10,5 - 11% vol","acidita":"","areadiproduzione":"Italia"}],"documenti":[{"nome":"Vino Bianco","path":"pdf/VinoBianco.pdf"}],"video":[],"foto":["prd/vino_bianco.jpg"]},{"id":"p6","titolo":"Vino Rosso","sottotitolo":"","codice":"","prezzo":"","img":"prd/vino_rosso.jpg","testo":"","varianti":[{"label":"SCHEDA","vitigno":"Corvina, Rondinella, Merlot e Cabernet","colore":"Rosso rubino","bouquet":"Fresco","gusto":"Fresco e fruttato","accostamenti":"Carni alla griglia, arrosti e formaggi","temperaturadiservizio":"18 - 20 °C","nrbottigliepercartone":6,"nrcartonipallet":100,"nrcartoniperstrato":25,"nrstratipallet":"4/5","dimensionecartone":"23,5x16x31","pesocartoneinKg":"7,5","pesopalletinKg":770,"bottiglia":"Bordolese Standard","contenuto":"750 ml","gradazione":"10,5 - 11% vol","acidita":"5,00 - 5,50 pH","areadiproduzione":"Italia"}],"documenti":[{"nome":"Vino Rosso","path":"pdf/VinoRosso.pdf"}],"video":[],"foto":["prd/vino_rosso.jpg"]},{"id":"p7","titolo":"Garganega Pinot Grigio delle Venezie IGP","sottotitolo":"","codice":"","prezzo":"","img":"prd/garganega_pinot_grigio_delle_venezie_igp.jpg","testo":"Vitigno che produce uva bianca dalla buccia colorata per la presenza di antociani, tipica dei vini rossi. Dopo la raccolta, l’uva viene pigiata e successivamente ha una pressatura soffice con un’immediata separazione delle bucce dal mosto. La fermentazione avviene in stretta protezione dalle ossidazioni, in botti di acciaio inox a temperatura controllata.","varianti":[{"label":"SCHEDA","vitigno":"Corvina, Rondinella, Molinara","colore":"Giallo paglierino","bouquet":"Profumo fine e leggermente aromatico","gusto":"Al palato dimostra buona struttura","accostamenti":"Vino da aperitivo o antipasti e piatti leggeri a base di pesce","temperaturadiservizio":"10 - 12 °C","nrbottigliepercartone":6,"nrcartonipallet":100,"nrcartoniperstrato":25,"nrstratipallet":"4/5","dimensionecartone":"23,5x16x31","pesocartoneinKg":"7,5","pesopalletinKg":770,"bottiglia":"Bordolese Standard Mezzo Bianco","contenuto":"750 ml","gradazione":"12 - 12,5% vol","acidita":"","areadiproduzione":"Tre Venezie"}],"documenti":[{"nome":"Garganega Pinot Grigio delle Venezie IGP","path":"pdf/GarganegaPinotGrigiodelleVenezieIGP.pdf"}],"video":[],"foto":["prd/garganega_pinot_grigio_delle_venezie_igp.jpg"]},{"id":"p8","titolo":"Bardolino DOC","sottotitolo":"","codice":"","prezzo":"","img":"prd/bardolino_doc.jpg","testo":"","varianti":[{"label":"SCHEDA","vitigno":"Corvina, Rondinella, Molinara","colore":"Rosso rubino brillante","bouquet":"Fresco con profumi fruttati e floreali","gusto":"Bilanciato, di corpo leggero, armonioso e vivace","accostamenti":"Zuppe, risotti e piatti di carne rossa","temperaturadiservizio":"18 - 20 °C","nrbottigliepercartone":6,"nrcartonipallet":100,"nrcartoniperstrato":25,"nrstratipallet":"4/5","dimensionecartone":"23,5x16x31","pesocartoneinKg":"7,5","pesopalletinKg":770,"bottiglia":"Bordolese Standard","contenuto":"750 ml","gradazione":"11,5 - 12% vol","acidita":"5,00 - 5,50 pH","areadiproduzione":"Lago di Garda"}],"documenti":[{"nome":"Bardolino DOC","path":"pdf/BardoinoDOC.pdf"}],"video":[],"foto":["prd/bardolino_doc.jpg"]}]}]}');
            var database = $.parseJSON('{"lista":[{"id":"c0","nome":"ST","img":"cat_0_salvaterra-bg.jpg","prodotti":[{"id":"p0","titolo":"Amarone D.O.C.G.","sottotitolo":"","codice":"","prezzo":"","img":"prd/amarone_doc.jpg","testo":"È un grande vino, frutto della pigiatura di uve poste a riposo nei frutta di grande struttura e corposità, nasce da una macerazione a freddo pe esplodere in una fermentazione copiosa mantenendo una temperatura tre anni in botte.","varianti":[{"label":"SCHEDA","vitigno":"Corvina, Corvinone, Rondinella","colore":"Rosso rubino intenso con riflessi granati","bouquet":"Profumo forte e rotondo con note di frutta appassita e spezie","gusto":"Rotondo che richiama la ciliegia e la prugna apassita","accostamenti":"Cacciagione, piatti saporiti e formaggi stagionati","temperaturadiservizio":"20 - 22 °C si consiglia di scaraffare<br>il decanter almeno un\'ora prima","nrbottigliepercartone":6,"nrcartonipallet":76,"nrcartoniperstrato":19,"nrstratipallet":"4/5","dimensionecartone":"26,5x18x31","pesocartoneinKg":"8,9","pesopalletinKg":710,"bottiglia":"Borgognotte Lucia","contenuto":"750 ml","gradazione":"14,5 - 15% vol","acidita":"","areadiproduzione":"Illasi, Quinto, Mezzane di Sotto, Montorio"}],"documenti":[{"nome":"Amarone D.O.C.G.","path":"pdflib/web/viewer.html"}],"video":[],"foto":["prd/amarone_doc.jpg"]},{"id":"p1","titolo":"Prosecco D.O.C.","sottotitolo":"","codice":"","prezzo":"","img":"prd/prosecco_doc.jpg","testo":"Il Prosecco ST Extra Dry ha un residuo zuccherino che varia dai 13 ai 17 grammi litro e con la sua morbidezza fa risaltare maggiormente il fruttato del vino. La raccolta dell’uva Glera, anticipata per produrre la base delvino spumante, e la fermentazione a temperatura controllata di 20 °C donano al vino un equilibrio delizioso.","varianti":[{"label":"SCHEDA","vitigno":"Glera","colore":"Giallo paglierino luminoso, perlage molto fine","bouquet":"Fruttato","gusto":"Deliziosamente equilibrato","accostamenti":"Spumante da aperitivo o ottimo accompagnamento per crostacei e, a fine pasto, per una macedonia di frutta","temperaturadiservizio":"6 - 8 °C","nrbottigliepercartone":6,"nrcartonipallet":80,"nrcartoniperstrato":16,"nrstratipallet":5,"dimensionecartone":"28,5x18,5x31,5","pesocartoneinKg":"8,9","pesopalletinKg":745,"bottiglia":"Collio","contenuto":"750 ml","gradazione":"11% vol","acidita":"","areadiproduzione":"Pedecollina Colli Euganei"}],"documenti":[{"nome":"Prosecco D.O.C.","path":"pdflib/web/viewer.html"}],"video":[],"foto":["prd/prosecco_doc.jpg"]},{"id":"p2","titolo":"Pinot Grigio delle Venezie IGT","sottotitolo":"","codice":"","prezzo":"","img":"prd/pinot_grigio_delle_venezie_igt.jpg","testo":"Vitigno che produce uva bianca dalla buccia colorata per la presenza di antociani, tipica dei vini rossi. Dopo la raccolta, l’uva viene pigiata e successivamente ha una pressatura soffice con un’immediata separazione delle bucce dal mosto. La fermentazione avviene in stretta protezione dalle ossidazioni, in botti di acciaio inox a temperatura controllata.","varianti":[{"label":"SCHEDA","vitigno":"Pinot Grigio","colore":"Giallo paglierino tendente al ramato","bouquet":"Profumo fine e leggermente aromatico","gusto":"Al palato dimostra buona struttura","accostamenti":"Vino da aperitivo o antipasti e piatti leggeri a base di pesce","temperaturadiservizio":"10 - 12 °C","nrbottigliepercartone":6,"nrcartonipallet":100,"nrcartoniperstrato":25,"nrstratipallet":"4/5","dimensionecartone":"23,5x16x31","pesocartoneinKg":"7,5","pesopalletinKg":770,"bottiglia":"Bordolese Standard Mezzo Bianco","contenuto":"750 ml","gradazione":"12,5% vol","acidita":"","areadiproduzione":"Oliosi, Provincia di Verona"}],"documenti":[{"nome":"Pinot Grigio delle Venezie IGT","path":"pdflib/web/viewer.html"}],"video":[],"foto":["prd/pinot_grigio_delle_venezie_igt.jpg"]},{"id":"p3","titolo":"Valpolicella Superiore Ripasso DOC","sottotitolo":"","codice":"","prezzo":"","img":"prd/valpolicella_superiore_ripasso_doc.jpg","testo":"Vino rotondo e pieno la cui struttura e alcool sono maggiori rispetto al Valpolicella Superiore.Per questo vino, infatti, è stata adottata la tecnica del ripasso, che consiste nel far macerare un buon Valpolicella sulle vinacce ottenute dalla pigiatura di uve appassite, destinate a dare Amarone o Recioto, e quindi ancora ricche di succo.","varianti":[{"label":"SCHEDA","vitigno":"Corvina, Corvinone, Rondinella","colore":"Rosso rubino intenso","bouquet":"Sentori ci ciliegia e frutti di bosco","gusto":"Rotondo e pieno","accostamenti":"Carni alla griglia, arrosti e formaggi","temperaturadiservizio":"18 - 20 °C","nrbottigliepercartone":6,"nrcartonipallet":76,"nrcartoniperstrato":19,"nrstratipallet":"4/5","dimensionecartone":"25x16,5x33","pesocartoneinKg":"8,9","pesopalletinKg":710,"bottiglia":"Bordolese Riva","contenuto":"750 ml","gradazione":"13,5 - 14% vol","acidita":"","areadiproduzione":"Illasi, Quinto, Mezzane di Sotto, Montorio"}],"documenti":[{"nome":"Valpolicella Superiore Ripasso DOC","path":"pdflib/web/viewer.html"}],"video":[],"foto":["prd/valpolicella_superiore_ripasso_doc.jpg"]},{"id":"p4","titolo":"Valpolicella DOC","sottotitolo":"","codice":"","prezzo":"","img":"prd/valpolicella_doc.jpg","testo":"Vino proveniente dalla zona storica della Valpolicella. Ricorda la ciliegia e la marasca. Ha un sapore asciutto, vellutato, di buona struttura, molto sapido.","varianti":[{"label":"SCHEDA","vitigno":"Corvina, Corvinone, Rondinella","colore":"Rosso rubino","bouquet":"Floreale e fruttato, ricorda la marasca fresca, le spezie, l’amarena","gusto":"Fresco e pieno","accostamenti":"Vino a tutto pasto","temperaturadiservizio":"16 °C","nrbottigliepercartone":6,"nrcartonipallet":76,"nrcartoniperstrato":19,"nrstratipallet":"4/5","dimensionecartone":"25x16,5x33","pesocartoneinKg":"8,9","pesopalletinKg":710,"bottiglia":"Bordolese Riva","contenuto":"750 ml","gradazione":"12,5 - 13% vol","acidita":"","areadiproduzione":"Illasi, Quinto, Mezzane di Sotto, Montorio"}],"documenti":[{"nome":"Valpolicella DOC","path":"pdflib/web/viewer.html"}],"video":[],"foto":["prd/valpolicella_doc.jpg"]},{"id":"p5","titolo":"Vino Bianco","sottotitolo":"","codice":"","prezzo":"","img":"prd/vino_bianco.jpg","testo":"","varianti":[{"label":"SCHEDA","vitigno":"Trebbiano Garganega","colore":"Giallo paglierino","bouquet":"Fresco","gusto":"Morbido fruttato","accostamenti":"","temperaturadiservizio":"6 - 8 °C","nrbottigliepercartone":6,"nrcartonipallet":100,"nrcartoniperstrato":25,"nrstratipallet":"4/5","dimensionecartone":"23,5x16x31","pesocartoneinKg":"7,5","pesopalletinKg":770,"bottiglia":"Bordolese Standard Mezzo Bianco","contenuto":"750 ml","gradazione":"10,5 - 11% vol","acidita":"","areadiproduzione":"Italia"}],"documenti":[{"nome":"Vino Bianco","path":"pdflib/web/viewer.html"}],"video":[],"foto":["prd/vino_bianco.jpg"]},{"id":"p6","titolo":"Vino Rosso","sottotitolo":"","codice":"","prezzo":"","img":"prd/vino_rosso.jpg","testo":"","varianti":[{"label":"SCHEDA","vitigno":"Corvina, Rondinella, Merlot e Cabernet","colore":"Rosso rubino","bouquet":"Fresco","gusto":"Fresco e fruttato","accostamenti":"Carni alla griglia, arrosti e formaggi","temperaturadiservizio":"18 - 20 °C","nrbottigliepercartone":6,"nrcartonipallet":100,"nrcartoniperstrato":25,"nrstratipallet":"4/5","dimensionecartone":"23,5x16x31","pesocartoneinKg":"7,5","pesopalletinKg":770,"bottiglia":"Bordolese Standard","contenuto":"750 ml","gradazione":"10,5 - 11% vol","acidita":"5,00 - 5,50 pH","areadiproduzione":"Italia"}],"documenti":[{"nome":"Vino Rosso","path":"pdflib/web/viewer.html"}],"video":[],"foto":["prd/vino_rosso.jpg"]},{"id":"p7","titolo":"Garganega Pinot Grigio delle Venezie IGP","sottotitolo":"","codice":"","prezzo":"","img":"prd/garganega_pinot_grigio_delle_venezie_igp.jpg","testo":"Vitigno che produce uva bianca dalla buccia colorata per la presenza di antociani, tipica dei vini rossi. Dopo la raccolta, l’uva viene pigiata e successivamente ha una pressatura soffice con un’immediata separazione delle bucce dal mosto. La fermentazione avviene in stretta protezione dalle ossidazioni, in botti di acciaio inox a temperatura controllata.","varianti":[{"label":"SCHEDA","vitigno":"Corvina, Rondinella, Molinara","colore":"Giallo paglierino","bouquet":"Profumo fine e leggermente aromatico","gusto":"Al palato dimostra buona struttura","accostamenti":"Vino da aperitivo o antipasti e piatti leggeri a base di pesce","temperaturadiservizio":"10 - 12 °C","nrbottigliepercartone":6,"nrcartonipallet":100,"nrcartoniperstrato":25,"nrstratipallet":"4/5","dimensionecartone":"23,5x16x31","pesocartoneinKg":"7,5","pesopalletinKg":770,"bottiglia":"Bordolese Standard Mezzo Bianco","contenuto":"750 ml","gradazione":"12 - 12,5% vol","acidita":"","areadiproduzione":"Tre Venezie"}],"documenti":[{"nome":"Garganega Pinot Grigio delle Venezie IGP","path":"pdflib/web/viewer.html"}],"video":[],"foto":["prd/garganega_pinot_grigio_delle_venezie_igp.jpg"]},{"id":"p8","titolo":"Bardolino DOC","sottotitolo":"","codice":"","prezzo":"","img":"prd/bardolino_doc.jpg","testo":"","varianti":[{"label":"SCHEDA","vitigno":"Corvina, Rondinella, Molinara","colore":"Rosso rubino brillante","bouquet":"Fresco con profumi fruttati e floreali","gusto":"Bilanciato, di corpo leggero, armonioso e vivace","accostamenti":"Zuppe, risotti e piatti di carne rossa","temperaturadiservizio":"18 - 20 °C","nrbottigliepercartone":6,"nrcartonipallet":100,"nrcartoniperstrato":25,"nrstratipallet":"4/5","dimensionecartone":"23,5x16x31","pesocartoneinKg":"7,5","pesopalletinKg":770,"bottiglia":"Bordolese Standard","contenuto":"750 ml","gradazione":"11,5 - 12% vol","acidita":"5,00 - 5,50 pH","areadiproduzione":"Lago di Garda"}],"documenti":[{"nome":"Bardolino DOC","path":"pdflib/web/viewer.html"}],"video":[],"foto":["prd/bardolino_doc.jpg"]}]}]}');

            $.domHooks({
                'body' :function(sel,$body){
    
                    var isiPad = (/iPad/i).test(navigator.userAgent);


                    if ( isiPad ) {
                        $body.addClass('isIpad');
                    }
                    else {
                        $body.addClass('isSmartphone');
                    }
                    

                    //download the productlist NOT IN LOCAL
                    /*
                    $.ajax({
                      url: "./prodotti.json"
                    }).done(function(response) {
                        $body.addClass("done");
                        database = $.parseJSON(response);

                        //after download productlist then i fill the menu
                        var $menuProdotti = $('.menu-prodotti ul');
                        $menuProdotti.html('');


                        $(database.lista).each(function(i,el){
                            $menuProdotti.append('<li><a href="javascript:;" data-target="#category-list" data-cat="'+el.id+'">'+el.nome+'</a></li>');                        

                        });
                    });

                    */


                    $(window).bind( 'orientationchange', function(e){
                        
                        if ( $('body').hasClass('menu-open') ) {

                            var $wrapper = $('#wrapper'),
                                $menu = $('#menu'),
                                menuWidth = $menu.width();

                                $wrapper.css({
                                    marginLeft: menuWidth+'px',
                                });

                                $wrapper.find('header').css({
                                    marginLeft: menuWidth+'px',
                                });   

                                $('.product-detail-content').find('.prodotto-toolbox').css({
                                    marginLeft: menuWidth+'px',
                                });   
                        }

                    });

                     $body.addClass("done");
                       

                    //after download productlist then i fill the menu
                    var $menuProdotti = $('.menu-prodotti ul');
                    $menuProdotti.html('');


                    $(database.lista).each(function(i,el){
                        $menuProdotti.append('<li><a href="javascript:;" data-target="#category-list" data-cat="'+el.id+'">'+el.nome+'</a></li>');                        

                    });
                   


                    $(document).on(
                        'click',
                        '.product-listitem li a',
                        function(){

                            loadProdotto($(this).data('cat'),$(this).data('prodotto'));

                            return false;
                        }
                    )

                    $(document).on(
                        'click',
                        '#menu li a',
                        function(){

                            if ( $(this).data('target') != null ) {
                                $('.button-menu').trigger('click');

                                $('.product-listitem-container').removeAttr('style')
                                $('#category-list').removeClass('show-back');

                                $('#wrapper').find('.layer-interna-show').removeClass('layer-interna-show');
                                $($(this).data('target')).addClass('layer-interna-show');


                                //fill the category layer
                                if ( $(this).data('cat') != null ) loadListaProdotti($(this).data('cat'));
                            }
                            return false;
                        }
                    )
                    

                    $(document).on(
                        'click',
                        '.prodotto-toolbox li',
                        function(){
                            $productDetail = $('.product-detail');

                            var layerattivo = $productDetail.attr('data-layerattivo');

                            if ( layerattivo!= "" ) $productDetail.removeClass('product-detail-layer-'+layerattivo+'-show');
                            
                            var layer = $(this).attr('class').replace('prodotto-toolbox-','');

                            $productDetail.addClass('product-detail-layer-'+layer+'-show');

                            $productDetail.attr('data-layerAttivo',layer);


                            //active clicked voice
                            $(this).parent().find('.prodotto-toolbox-active').removeClass('prodotto-toolbox-active');
                            $(this).addClass('prodotto-toolbox-active');
                        }
                    )


                    $(document).on(
                        'click',
                        '.accordion-label',
                        function(){
                            $(this).next().slideToggle(function(){
                                $(this).parent().toggleClass('prodotto-accordion-open');
                            });
                        }
                    )

                    $(document).on(
                        'click',
                        '.prodotto-toolbox-foto',
                        function(){
                            

                                window.mySwipe.setup();

                        }
                    )

                    $(document).on(
                        'click',
                        '.button-back',
                        function(){
                            
                            $('.product-listitem-container').animate({
                                marginLeft: "0",
                            },'400',function(){
                                $('#category-list').removeClass('show-back');
                                });


                        }
                    )
                    $(document).on(
                        'click',
                        '.product-foto-close',
                        function(){
                            $('.prodotto-toolbox-info').trigger('click');
                        }

                    )


                    $(document).on(
                        'click',
                        '.prodotto-document',
                        function(){
                            $a = $(this).find('a');

                            window.plugins.childBrowser.showWebPage($a.attr('href'));

                        }

                    )

                    
                },
                '.button-menu': function (selector, $buttonMenu) {
                    var $wrapper = $('#wrapper'),
                        $menu = $('#menu');

                    $buttonMenu.click(function(){

                        var menuWidth = $menu.width();

                        if ( !$wrapper.is(':animated') )  {
                            //if wrapper is not animated 
                            
                            if ( !$('body').hasClass('menu-open') ) {
                                //if menu isn't visible
                                $wrapper.animate({
                                    marginLeft: menuWidth+'px',
                                }, 300, function(){$('body').addClass('menu-open')});

                                $wrapper.find('header').animate({
                                    marginLeft: menuWidth+'px',
                                }, 300, function(){});

                                $('.product-detail-content').find('.prodotto-toolbox').animate({
                                    marginLeft: menuWidth+'px',
                                }, 300, function(){});
                            }
                            else {
                                $('body').removeClass('menu-open')
                                $wrapper.animate({
                                    marginLeft: 0,
                                }, 300, function(){});

                               $wrapper.find('header').animate({
                                    marginLeft: 0,
                                }, 300, function(){});

                               $('.product-detail-content').find('.prodotto-toolbox').animate({
                                    marginLeft: 0,
                                }, 300, function(){});
                            }
                        }
                    }); 
                }
                
            });
            function loadListaProdotti( id ){
                $body = $('body');

                var $menuCategorie = $('.product-listitem');

                $menuCategorie.html('');
                $('.product-detail').removeClass('product-detail-show');

                $(database.lista).each(function(i,el){
                    if ( el.id == id ){

                        $('.product-listitem-name').html(el.nome);
                        $('#category-title').html(el.nome);

                        if ( !$body.hasClass('isSmartphone')  ) $('.list-product').css('background-image','url(img/'+el.img+')');

                        //found the category then print elements

                        $(el.prodotti).each(function(j,menu){

                            $menuCategorie.append('<li class="clearfix">'+
                                '<a href="javascript:;" class="clearfix" data-cat="'+id+'" data-prodotto='+menu.id+'>'+
                                    '<div class="prodotto-img"><img src="img/t_'+menu.img+'" class="" /></div>'+
                                    '<p class="prodotto-titolo">'+menu.titolo+'</p>'+
                                    '<p class="prodotto-sottotitolo">'+menu.sottotitolo+'</p>'+
                                    '<p class="prodotto-codice">'+menu.codice+'</p>'+
                                '</a>'+
                                '<ul class="prodotto-toolbox"><li class="prodotto-toolbox-info"><span>Info</span></li><li class="prodotto-toolbox-scheda"><span>Scheda</span></li><li class="prodotto-toolbox-doc"><span>Documenti</span></li><li class="prodotto-toolbox-foto"><span>Foto</span></li></ul>'+
                            '</li>')
                        });

                    }
                });               

            }
            function loadProdotto( idCat, idProd ){



                if ( $('body').hasClass('menu-open') ) $('.button-menu').trigger('click');



                //first animation..
                $body = $('body');
                if ( $body.hasClass('isSmartphone') ) {

                    $('.product-listitem-container').animate({
                        marginLeft: "-100%",
                    });

                    $('#category-list').addClass('show-back');

                }
                else {
                    $('.showToolbox').removeClass('showToolbox');
                    $('a[data-prodotto="'+idProd+'"]').parent().addClass('showToolbox');
                }
               
               $(database.lista).each(function(i,el){
                    if ( el.id == idCat ){ //found category then find product
                        $(el.prodotti).each(function(j,prodotto){
                            if ( prodotto.id == idProd ) { //found prodotto
                                $productDetail = $('.product-detail');
                                $productDetailContent = $('.product-detail-content');

                                $productDetailContent.html('');

                                var $prodInfo = $('<div class="product-detail-layer product-detail-layer-info"  />');
                                var $prodScheda = $('<div class="product-detail-layer product-detail-layer-scheda"  />');
                                var $prodDoc = $('<div class="product-detail-layer product-detail-layer-doc"  />');
                                var $prodVideo = $('<div class="product-detail-layer product-detail-layer-video" />');
                                var $prodFoto = $('<div class="product-detail-layer product-detail-layer-foto"  />');


                                $productDetailContent.append('<h1>'+prodotto.titolo+' '+prodotto.sottotitolo+'<div class="prodotto-icona" /></h1>');
                                $productDetailContent.append('<div class="prodotto-img"><img src="img/m_'+prodotto.img+'" /></div>');

                                $productDetailContent.append('<ul class="prodotto-toolbox"><li class="prodotto-toolbox-info"><span>Info</span></li><li class="prodotto-toolbox-scheda"><span>Scheda</span></li><li class="prodotto-toolbox-doc"><span>Documenti</span></li><li class="prodotto-toolbox-foto"><span>Foto</span></li></ul>');


                                //$prodInfo.append('<div class="prodotto-info"><div class="fll-left">'+prodotto.codice+'</div><div class="fll-right">'+prodotto.prezzo+'€</div></div>');

                                $prodInfo.append('<div class="prodotto-testo">'+prodotto.testo+'</div>');

                               

                                $(prodotto.varianti).each(function(i,variante){
                                    var htmlAccordion = $('<div class="accordion-testo"/>');

                                    if ( variante.vitigno ) htmlAccordion.append('<p class="prodotto-vitigno clearfix"><span>Vitigno: </span>'+variante.vitigno+'</p>');
                                    if ( variante.colore )  htmlAccordion.append('<p class="prodotto-colore clearfix"><span>Colore: </span>'+variante.colore+'</p>');
                                    if ( variante.bouquet ) htmlAccordion.append('<p class="prodotto-bouquet clearfix"><span>Bouquet: </span>'+variante.bouquet+'</p>');
                                    if ( variante.gusto ) htmlAccordion.append('<p class="prodotto-gusto clearfix"><span>Gusto: </span>'+variante.gusto+'</p>');
                                    if ( variante.accostamenti ) htmlAccordion.append('<p class="prodotto-accostamenti clearfix"><span>Accostamenti: </span>'+variante.accostamenti+'</p>');
                                    if ( variante.temperaturadiservizio ) htmlAccordion.append('<p class="prodotto-temperaturadiservizio clearfix"><span>Temperatura di servizio: </span>'+variante.temperaturadiservizio+'</p>');
                                    if ( variante.nrbottigliepercartone ) htmlAccordion.append('<p class="prodotto-nrbottigliepercartone clearfix"><span>Nr bottiglie per cartone: </span>'+variante.nrbottigliepercartone+'</p>');
                                    if ( variante.nrcartoniperstrato ) htmlAccordion.append('<p class="prodotto-nrcartoniperstrato clearfix"><span>Nr cartoni per strato: </span>'+variante.nrcartoniperstrato+'</p>');
                                    if ( variante.nrcartonipallet ) htmlAccordion.append('<p class="prodotto-nrcartonipallet clearfix"><span>Nr cartoni pallet: </span>'+variante.nrcartonipallet+'</p>');
                                    if ( variante.nrstratipallet ) htmlAccordion.append('<p class="prodotto-nrstratipallet clearfix"><span>Nr strati pallet: </span>'+variante.nrstratipallet+'</p>');
                                    if ( variante.dimensionecartone ) htmlAccordion.append('<p class="prodotto-dimensionecartone clearfix"><span>Dimensione cartone: </span>'+variante.dimensionecartone+'</p>');
                                    if ( variante.pesocartoneinKg ) htmlAccordion.append('<p class="prodotto-pesocartoneinKg clearfix"><span>Peso cartone in Kg: </span>'+variante.pesocartoneinKg+'</p>');
                                    if ( variante.pesopalletinKg ) htmlAccordion.append('<p class="prodotto-pesopalletinKg clearfix"><span>Peso pallet in Kg: </span>'+variante.pesopalletinKg+'</p>');
                                    if ( variante.bottiglia ) htmlAccordion.append('<p class="prodotto-bottiglia clearfix"><span>Bottiglia: </span>'+variante.bottiglia+'</p>');
                                    if ( variante.contenuto ) htmlAccordion.append('<p class="prodotto-contenuto clearfix"><span>Contenuto: </span>'+variante.contenuto+'</p>');
                                    if ( variante.gradazione ) htmlAccordion.append('<p class="prodotto-gradazione clearfix"><span>Gradazione: </span>'+variante.gradazione+'</p>');
                                    if ( variante.acidita ) htmlAccordion.append('<p class="prodotto-acidita clearfix"><span>Acidita: </span>'+variante.acidita+'</p>');
                                    

                                    if ( variante.areadiproduzione ) htmlAccordion.append('<p class="prodotto-areadiproduzione clearfix"><span>Area di produzione: </span>'+variante.areadiproduzione+'</p>');

                                    $prodScheda.append('<div class="prodotto-accordion"><a href="javascript:;" class="accordion-label">'+variante.label+'</a>'+htmlAccordion[0].outerHTML+'</div>');

                                });

                                $(prodotto.documenti).each(function(i,doc){

                                    $prodDoc.append('<article class="prodotto-documento"><a href="'+doc.path+'">'+doc.nome+'</a></article>');

                                });

                                $(prodotto.video).each(function(i,video){

                                    $prodVideo.append('<article class="prodotto-documento"><a target="_blank" href="'+video.path+'">'+video.nome+'</a></article>');

                                });

                                var elencofoto = $("<div id='mySwipe' style='' class='swipe'><div class='swipe-wrap'/></div>");
                                var indicator = $('<ul id="position"/>');

                                $(prodotto.foto).each(function(i,foto){

                                    elencofoto.find('.swipe-wrap').append('<div><img src="img/m_'+foto+'" /></div>');
                                    
                                    if ( i == 0) indicator.append('<li class="on"/>');
                                    else indicator.append('<li/>');

                                });

                               

                                $prodFoto.append(elencofoto);
                                $prodFoto.append(indicator);
                                $prodFoto.append('<div class="product-foto-close">&#10006;</div>')


                                $productDetailContent.append($prodInfo);
                                $productDetailContent.append($prodScheda);
                                $productDetailContent.append($prodDoc);
                                $productDetailContent.append($prodVideo);
                                $productDetailContent.append($prodFoto);

                                if ( !$productDetail.hasClass('product-detail-show')) $productDetail.addClass('product-detail-show');
                                
                                //accendo le info
                                $('.prodotto-toolbox-info').trigger('click');



                                window.mySwipe = $('#mySwipe').Swipe({
                                    callback: function(pos) {
                                        console.log(pos);

                                        $('#position li.on').removeClass('on');

                                        $($('#position li').get(pos)).addClass('on');
                                    }

                                }).data('Swipe')

                            }
                        });
                    }
                })






                

            }